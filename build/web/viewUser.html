<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <title>Car Rental</title>

</head>

<body>
  <div class="header">
    <nav class="navbar navbar-default navbar-fixed-top" style="margin-top:0px;">
      <div class="navigation" style="direction: ltr">
        <div class="container">
          <div class="navbar-brand">
            <a href="#"><img style="height: 164px;width: 1000px;border-radius: 5px;" src="images/pngegg.png">
            </a>
          </div>
        </div>
        <div class="container">
          <div class="navbar-collapse collapse">
            <div class="menu" style="background-color: #FFC300;">
              <ul class="nav nav-tabs" role="tablist" style="margin-top:80px;">
                <li role="presentation"><a href="user.html" style="color: black">Home</a></li>
                <li class="space" role="presentation"><a href="viewUser.html" style="color: black">View/Renting a
                    Cars</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </div>
  <!-- End Header -->

  <main style="margin-top: 350px">
    <div>
      <h1 style="background-color: greenyellow; text-align: center;"> <strong>All Cars</strong>
      </h1>
      <div class="row">
        <div class="col-12">
          <table class="table table-striped mt-4" style="background-color: bisque" cellspacing="1">
            <thead>
              <tr>
                <td scope="col">#</th>
                <th scope="col">Type</th>
                <th scope="col">Model</th>
                <th scope="col">Production Year</th>
                <th scope="col">Price/Day</th>
                <th scope="col">Action</th>

              </tr>
            </thead>
            <tbody class="tableContents"></tbody>
          </table>
          <div class="response"></div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>

  <script>
    $(document).ready(function () {
      let Url = "./api/cars/"
      $.ajax({
        url: Url,
        type: "GET",
        success: function (result) {
          console.log(result.cars);

          $.each(result.cars, function (index, car) {
            $(".tableContents").append(
              "<tr>" +
              "<th>" + index + "</th>" +
              "<td>" + car.type + "</td>" +
              "<td>" + car.model + "</td>" +
              "<td>" + car.productionYear + "</td>" +
              "<td>" + car.priceDay + "</td>" +
              "<td>" + '<button class="delete-btn btn btn-primary" data-idx="' + index + '""> RENT</button>' + "</td>" +
              "</tr>"

            );
          });
          $(".delete-btn").each(function (i, elem) {
            elem.addEventListener("click", function () {
              var idx=elem.dataset.idx;
              console.log("clicked " + idx);
              var goPage='./cal.html?idx='+elem.dataset.idx;
              location.replace(goPage);
            })
          });
        },
        error: function (err) {
          console.error(err);
          $(".response").html(
            '<div class="alert alert-error mt-4" role="alert"> Sorry!, error Here' +
            err +
            "</div>"
          );
        }
      })

    });
  </script>
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/bootstrap.min1.css" rel="stylesheet" />
  <link href="css/bootstrap.css" rel="stylesheet" />

  <link href='http://fonts.googleapis.com/css?family=Ropa+Sans' rel='stylesheet' type='text/css'>
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <link href="css/style1.css" rel="stylesheet" type="text/css" />
  <link href="css/exchange.css" rel="stylesheet" />
  <link href="css/chosen.css" rel="stylesheet" />
  <link href="css/style2.css" rel="stylesheet" type="text/css" media="all" />
  <link href="css/responsiveslides.css" rel="stylesheet">
  <link href="css/style2.css" rel="stylesheet" type="text/css" />


  <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
  <script src="js/jquery-3.5.1.min.js"></script>
  <!-- <script src="js/responsiveslides.min.js"></script> -->
</body>

</html>